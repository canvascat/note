<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Quick Start</title>
  <link rel="stylesheet" href="./public/katex.min.css">
  <link rel="stylesheet" href="./public/monokai-sublime.min.css">
  <link rel="stylesheet" href="./public/quill.snow.css">
  <script src="./public/katex.min.js" type="text/javascript"></script>
  <script src="./public/highlight.min.js" type="text/javascript"></script>
  <script src="./public/quill.min.js" type="text/javascript"></script>
  <!-- <link href="http://cdn.quilljs.com/1.3.4/quill.core.css" rel="stylesheet"> -->
  <style>
    .wrapper {
      margin: 50px auto;
      max-width: 720px;
    }
  </style>
</head>

<body>
  <div class="wrapper">
    <div id="editor">
      <!-- <p style="text-align: center">Hello World!</p>
      <p>Some initial
        <strong>bold</strong> text</p>
        <div>asfas</div> <u>sdsa</u>
      <p>
        <img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017051504.png" alt="1111" style="width: 100px;height: auto">
        <br>
      </p> -->
    </div>
  </div>

  <script src="./quill.js"></script>
  <script>
    // var options = {
    //   // debug: 'info',
    //   modules: {
    //     toolbar: [
    //       // ['undo', 'redo'],
    //       'bold',
    //       'italic',
    //       'underline',
    //       'strike'
    //     ]
    //   },
    //   placeholder: 'Compose an epic...',
    //   readOnly: false,
    //   theme: 'snow'
    // }
    var toolbarOptions = [
      [
        { 'font': [] },
        { 'size': ['small', false, 'large', 'huge'] }  // 字体大小用户自定义下拉
      ],
      ['bold', 'italic', 'underline', 'strike'],        // 切换按钮
      [{ 'color': [] }, { 'background': [] }],
      [{ 'script': 'sub'}, { 'script': 'super' }],      // 上标/下标
      [
        { 'header': 1 },
        { 'header': 2 },
        { 'header': [1, 2, 3, 4, 5, 6, false] }
      ],
      ['blockquote', 'code-block'],
      [{ 'list': 'ordered'}, { 'list': 'bullet' }],
      [{ 'indent': '-1'}, { 'indent': '+1' }],          // 减少缩进/缩进
      [{ 'direction': 'rtl' }],                         // 文本下划线

      [{ 'align': [] }],
      ['link', 'image', 'video', 'formula'],
      ['clean']                                         // 清除格式
    ];

    var options = {
      debug: 'info',
      modules: {
        toolbar: toolbarOptions,
        syntax: true
      },
      placeholder: 'Compose an epic...',
      readOnly: false,
      theme: 'snow'
    };
    var quill = new Quill('#editor', options);
    var allContents = []
    quill.on('text-change', function(delta, oldContents, source) {
      // console.log(source)
      allContents.push(delta)
      // console.log(delta)
      // console.log(oldContents)
    })
    // source: 'api'/'user'/'silent'
    // 不能捕捉到silent的修改
    quill.on('selection-change', function(datel, oldDelta) {
      console.log(datel) //Range: {index: i, length: l}
    })
    quill.on('editor-change', function(eventName, ...args) {
      // args = [dalel/range, oldDatel, source]
      console.log(eventName, args)
    })
    // quill.clipboard.addMatcher(Node.TEXT_NODE, function(node, delta) {
    //   console.log(node)
    //   return new Delta().insert(node.data)
    // })
    // quill.clipboard.addMatcher('B', function (node, delta) {
    //   return delta.compose(new Delta().retain(delta.length(), { bold: true }));
    // });

  </script>

</body>

</html>